INFO 2025-05-07 00:33:01,469 autoreload 28040 35324 Watching for file changes with StatReloader
INFO 2025-05-07 00:33:01,644 wsgi 28040 23548 ==== Starting FoodBalancer Backend Application ====
INFO 2025-05-07 00:33:01,644 wsgi 28040 23548 Environment: config.settings
INFO 2025-05-07 00:33:01,646 wsgi 28040 23548 Python version: 3.12.8 (tags/v3.12.8:2dc476b, Dec  3 2024, 19:30:04) [MSC v.1942 64 bit (AMD64)]
INFO 2025-05-07 00:33:01,648 wsgi 28040 23548 Application initialized successfully
INFO 2025-05-07 00:33:26,905 views 28040 37056 Profile accessed: user_id=66
INFO 2025-05-07 00:33:26,947 basehttp 28040 37056 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 00:33:27,091 allergen 28040 37056 Listing all allergens: user_id=66
INFO 2025-05-07 00:33:27,100 allergen 28040 37056 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:33:27,116 basehttp 28040 37056 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 00:33:27,217 basehttp 28040 37056 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 112
INFO 2025-05-07 00:33:27,314 basehttp 28040 37056 "GET /api/user-allergens/?limit=1000 HTTP/1.1" 200 150
INFO 2025-05-07 00:33:27,523 allergen 28040 37056 Listing all allergens: user_id=66
INFO 2025-05-07 00:33:27,533 allergen 28040 37056 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:33:27,583 basehttp 28040 37056 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 00:33:27,701 basehttp 28040 37056 "GET /api/user-allergens/?limit=1000 HTTP/1.1" 200 150
INFO 2025-05-07 00:36:33,997 views 28040 24692 Profile accessed: user_id=66
INFO 2025-05-07 00:36:34,026 basehttp 28040 24692 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 00:36:34,145 ingredient 28040 24692 Listing refrigerator ingredients: user_id=66
INFO 2025-05-07 00:36:34,151 ingredient 28040 24692 Retrieved 0 refrigerator ingredients for user_id=66, time=0.01s
INFO 2025-05-07 00:36:34,207 meal_plan 28040 34536 Getting current meal plan for user_id=66, date=2025-05-07
WARNING 2025-05-07 00:36:34,235 meal_plan 28040 34536 No current meal plan found for user_id=66, time=0.03s
INFO 2025-05-07 00:36:34,320 basehttp 28040 24692 "GET /api/refrigerator/ HTTP/1.1" 200 52
WARNING 2025-05-07 00:36:34,423 basehttp 28040 34536 "GET /api/meal-plans/current/ HTTP/1.1" 404 68
INFO 2025-05-07 00:36:34,465 basehttp 28040 37748 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 112
INFO 2025-05-07 00:36:34,533 basehttp 28040 29792 "GET /api/favorites/ HTTP/1.1" 200 52
INFO 2025-05-07 00:36:34,541 basehttp 28040 16500 "GET /api/shopping-list/ HTTP/1.1" 200 52
INFO 2025-05-07 00:36:34,709 meal_plan 28040 34536 Getting current meal plan for user_id=66, date=2025-05-07
INFO 2025-05-07 00:36:34,717 ingredient 28040 37748 Listing refrigerator ingredients: user_id=66
WARNING 2025-05-07 00:36:34,720 meal_plan 28040 34536 No current meal plan found for user_id=66, time=0.01s
INFO 2025-05-07 00:36:34,730 ingredient 28040 37748 Retrieved 0 refrigerator ingredients for user_id=66, time=0.01s
INFO 2025-05-07 00:36:34,835 basehttp 28040 24692 "GET /api/favorites/ HTTP/1.1" 200 52
INFO 2025-05-07 00:36:34,860 basehttp 28040 37748 "GET /api/refrigerator/ HTTP/1.1" 200 52
INFO 2025-05-07 00:36:34,889 basehttp 28040 16500 "GET /api/shopping-list/ HTTP/1.1" 200 52
WARNING 2025-05-07 00:36:34,906 basehttp 28040 34536 "GET /api/meal-plans/current/ HTTP/1.1" 404 68
INFO 2025-05-07 00:36:34,924 basehttp 28040 29792 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 112
INFO 2025-05-07 00:37:33,563 views 28040 31008 Profile accessed: user_id=66
INFO 2025-05-07 00:37:33,566 allergen 28040 24136 Listing all allergens: user_id=66
INFO 2025-05-07 00:37:33,573 allergen 28040 24136 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:37:33,604 basehttp 28040 31008 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 00:37:33,621 basehttp 28040 24136 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 00:37:33,704 allergen 28040 24136 Listing all allergens: user_id=66
INFO 2025-05-07 00:37:33,713 allergen 28040 24136 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:37:33,727 basehttp 28040 31008 "GET /api/user-allergens/?limit=1000 HTTP/1.1" 200 150
INFO 2025-05-07 00:37:33,755 basehttp 28040 24136 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 00:37:33,855 basehttp 28040 31008 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 112
INFO 2025-05-07 00:37:34,006 basehttp 28040 31008 "GET /api/user-allergens/?limit=1000 HTTP/1.1" 200 150
INFO 2025-05-07 00:40:14,996 autoreload 28040 35324 D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\apps\core\views\allergen.py changed, reloading.
INFO 2025-05-07 00:40:15,671 autoreload 32660 35768 Watching for file changes with StatReloader
INFO 2025-05-07 00:40:15,932 wsgi 32660 29840 ==== Starting FoodBalancer Backend Application ====
INFO 2025-05-07 00:40:15,933 wsgi 32660 29840 Environment: config.settings
INFO 2025-05-07 00:40:15,933 wsgi 32660 29840 Python version: 3.12.8 (tags/v3.12.8:2dc476b, Dec  3 2024, 19:30:04) [MSC v.1942 64 bit (AMD64)]
INFO 2025-05-07 00:40:15,940 wsgi 32660 29840 Application initialized successfully
INFO 2025-05-07 00:40:25,781 autoreload 35516 36960 Watching for file changes with StatReloader
INFO 2025-05-07 00:40:25,964 wsgi 35516 1124 ==== Starting FoodBalancer Backend Application ====
INFO 2025-05-07 00:40:25,964 wsgi 35516 1124 Environment: config.settings
INFO 2025-05-07 00:40:25,965 wsgi 35516 1124 Python version: 3.12.8 (tags/v3.12.8:2dc476b, Dec  3 2024, 19:30:04) [MSC v.1942 64 bit (AMD64)]
INFO 2025-05-07 00:40:25,968 wsgi 35516 1124 Application initialized successfully
INFO 2025-05-07 00:40:29,531 allergen 35516 8372 Listing all allergens: user_id=66
INFO 2025-05-07 00:40:29,535 views 35516 21148 Profile accessed: user_id=66
INFO 2025-05-07 00:40:29,543 allergen 35516 8372 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:40:29,615 basehttp 35516 21148 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 00:40:29,615 basehttp 35516 8372 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 00:40:29,714 allergen 35516 8372 Listing all allergens: user_id=66
INFO 2025-05-07 00:40:29,720 allergen 35516 8372 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:40:29,740 basehttp 35516 8372 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
ERROR 2025-05-07 00:40:29,877 basehttp 35516 8372 "GET /api/user-allergens/?limit=100 HTTP/1.1" 500 23678
ERROR 2025-05-07 00:40:29,883 basehttp 35516 21148 "GET /api/user-allergens/?limit=1000 HTTP/1.1" 500 23681
ERROR 2025-05-07 00:40:30,029 basehttp 35516 21148 "GET /api/user-allergens/?limit=1000 HTTP/1.1" 500 23681
INFO 2025-05-07 00:40:30,122 allergen 35516 21148 Listing all allergens: user_id=66
INFO 2025-05-07 00:40:30,127 allergen 35516 21148 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:40:30,146 basehttp 35516 21148 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
ERROR 2025-05-07 00:40:30,258 basehttp 35516 21148 "GET /api/user-allergens/?limit=1000 HTTP/1.1" 500 23681
INFO 2025-05-07 00:41:40,207 autoreload 35516 36960 D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\apps\core\views\allergen.py changed, reloading.
INFO 2025-05-07 00:41:40,891 autoreload 12532 13580 Watching for file changes with StatReloader
INFO 2025-05-07 00:41:41,144 wsgi 12532 29504 ==== Starting FoodBalancer Backend Application ====
INFO 2025-05-07 00:41:41,144 wsgi 12532 29504 Environment: config.settings
INFO 2025-05-07 00:41:41,144 wsgi 12532 29504 Python version: 3.12.8 (tags/v3.12.8:2dc476b, Dec  3 2024, 19:30:04) [MSC v.1942 64 bit (AMD64)]
INFO 2025-05-07 00:41:41,148 wsgi 12532 29504 Application initialized successfully
INFO 2025-05-07 00:41:44,238 autoreload 33712 24108 Watching for file changes with StatReloader
INFO 2025-05-07 00:41:44,449 wsgi 33712 20500 ==== Starting FoodBalancer Backend Application ====
INFO 2025-05-07 00:41:44,449 wsgi 33712 20500 Environment: config.settings
INFO 2025-05-07 00:41:44,450 wsgi 33712 20500 Python version: 3.12.8 (tags/v3.12.8:2dc476b, Dec  3 2024, 19:30:04) [MSC v.1942 64 bit (AMD64)]
INFO 2025-05-07 00:41:44,454 wsgi 33712 20500 Application initialized successfully
INFO 2025-05-07 00:41:46,745 views 33712 22424 Profile accessed: user_id=66
INFO 2025-05-07 00:41:46,792 basehttp 33712 22424 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 00:41:46,875 allergen 33712 22424 Listing all allergens: user_id=66
INFO 2025-05-07 00:41:46,882 allergen 33712 22424 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:41:46,904 basehttp 33712 22424 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 00:41:46,955 allergen 33712 22424 Listing user allergens: user_id=66
INFO 2025-05-07 00:41:47,006 allergen 33712 22424 Retrieved unknown user allergens, user_id=66, time=0.05s
INFO 2025-05-07 00:41:47,032 basehttp 33712 22424 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 143
INFO 2025-05-07 00:41:47,156 allergen 33712 22424 Listing user allergens: user_id=66
INFO 2025-05-07 00:41:47,167 allergen 33712 22424 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:41:47,186 basehttp 33712 22424 "GET /api/user-allergens/?limit=1000 HTTP/1.1" 200 143
INFO 2025-05-07 00:41:47,345 allergen 33712 22424 Listing all allergens: user_id=66
INFO 2025-05-07 00:41:47,350 allergen 33712 22424 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:41:47,367 basehttp 33712 22424 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 00:41:47,432 allergen 33712 22424 Listing user allergens: user_id=66
INFO 2025-05-07 00:41:47,440 allergen 33712 22424 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:41:47,456 basehttp 33712 22424 "GET /api/user-allergens/?limit=1000 HTTP/1.1" 200 143
INFO 2025-05-07 00:42:19,668 allergen 33712 12904 Listing all allergens: user_id=66
INFO 2025-05-07 00:42:19,672 allergen 33712 12904 Retrieved 50 allergens, user_id=66, time=0.00s
INFO 2025-05-07 00:42:19,693 basehttp 33712 12904 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 00:42:21,693 allergen 33712 12904 Listing all allergens: user_id=66
INFO 2025-05-07 00:42:21,697 allergen 33712 12904 Retrieved 50 allergens, user_id=66, time=0.00s
INFO 2025-05-07 00:42:21,724 views 33712 29948 Profile update attempt: user_id=66
INFO 2025-05-07 00:42:21,724 basehttp 33712 12904 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 00:42:21,782 allergen 33712 12904 Listing user allergens: user_id=66
INFO 2025-05-07 00:42:21,793 allergen 33712 12904 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:42:21,818 basehttp 33712 12904 "GET /api/user-allergens/?limit=1000 HTTP/1.1" 200 143
INFO 2025-05-07 00:42:21,844 views 33712 29948 Profile updated successfully: user_id=66, time=0.12s
INFO 2025-05-07 00:42:21,879 basehttp 33712 29948 "PUT /api/users/profile/ HTTP/1.1" 200 141
INFO 2025-05-07 00:42:21,979 allergen 33712 29948 Starting user allergens update for user ID: 66
INFO 2025-05-07 00:42:21,980 allergen 33712 29948 Request data: {'allergen_ids': [3, 4, 5, 2]}
INFO 2025-05-07 00:42:21,980 allergen 33712 29948 Allergen IDs to update: [3, 4, 5, 2]
INFO 2025-05-07 00:42:21,988 allergen 33712 29948 Deleted (3, {'core.M2MUsrAlg': 3}) existing allergen records
INFO 2025-05-07 00:42:21,998 allergen 33712 29948 Created allergen mapping: user 66 - allergen 3
INFO 2025-05-07 00:42:22,006 allergen 33712 29948 Created allergen mapping: user 66 - allergen 4
INFO 2025-05-07 00:42:22,011 allergen 33712 29948 Created allergen mapping: user 66 - allergen 5
INFO 2025-05-07 00:42:22,018 allergen 33712 29948 Created allergen mapping: user 66 - allergen 2
INFO 2025-05-07 00:42:22,019 allergen 33712 29948 Successfully updated allergens for user 66: [3, 4, 5, 2]
ERROR 2025-05-07 00:42:22,023 allergen 33712 29948 Error updating allergens: 'UserAllergenViewSet' object has no attribute 'invalidate_cache'
ERROR 2025-05-07 00:42:22,024 allergen 33712 29948 Traceback: Traceback (most recent call last):
  File "D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\apps\core\views\allergen.py", line 101, in update_user_allergens
    self.invalidate_cache()
    ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'UserAllergenViewSet' object has no attribute 'invalidate_cache'

WARNING 2025-05-07 00:42:22,076 basehttp 33712 29948 "POST /api/user-allergens/update/ HTTP/1.1" 400 76
INFO 2025-05-07 00:42:22,243 allergen 33712 29948 Listing all allergens: user_id=66
INFO 2025-05-07 00:42:22,248 allergen 33712 29948 Retrieved 50 allergens, user_id=66, time=0.00s
INFO 2025-05-07 00:42:22,276 basehttp 33712 29948 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 00:42:22,410 allergen 33712 29948 Listing user allergens: user_id=66
INFO 2025-05-07 00:42:22,422 allergen 33712 29948 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:42:22,445 basehttp 33712 29948 "GET /api/user-allergens/?limit=1000 HTTP/1.1" 200 178
INFO 2025-05-07 00:43:02,318 autoreload 33712 24108 D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\apps\core\views\allergen.py changed, reloading.
INFO 2025-05-07 00:43:03,272 autoreload 36540 24856 Watching for file changes with StatReloader
INFO 2025-05-07 00:43:03,461 wsgi 36540 2996 ==== Starting FoodBalancer Backend Application ====
INFO 2025-05-07 00:43:03,461 wsgi 36540 2996 Environment: config.settings
INFO 2025-05-07 00:43:03,461 wsgi 36540 2996 Python version: 3.12.8 (tags/v3.12.8:2dc476b, Dec  3 2024, 19:30:04) [MSC v.1942 64 bit (AMD64)]
INFO 2025-05-07 00:43:03,464 wsgi 36540 2996 Application initialized successfully
INFO 2025-05-07 00:43:05,255 autoreload 7108 35848 Watching for file changes with StatReloader
INFO 2025-05-07 00:43:05,442 wsgi 7108 35224 ==== Starting FoodBalancer Backend Application ====
INFO 2025-05-07 00:43:05,443 wsgi 7108 35224 Environment: config.settings
INFO 2025-05-07 00:43:05,443 wsgi 7108 35224 Python version: 3.12.8 (tags/v3.12.8:2dc476b, Dec  3 2024, 19:30:04) [MSC v.1942 64 bit (AMD64)]
INFO 2025-05-07 00:43:05,446 wsgi 7108 35224 Application initialized successfully
INFO 2025-05-07 00:43:06,976 views 7108 33652 Profile accessed: user_id=66
INFO 2025-05-07 00:43:07,024 basehttp 7108 33652 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 00:43:07,104 allergen 7108 33652 Listing all allergens: user_id=66
INFO 2025-05-07 00:43:07,109 allergen 7108 33652 Retrieved 50 allergens, user_id=66, time=0.00s
INFO 2025-05-07 00:43:07,125 basehttp 7108 33652 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 00:43:07,170 allergen 7108 33652 Listing user allergens: user_id=66
INFO 2025-05-07 00:43:07,182 allergen 7108 33652 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:43:07,205 basehttp 7108 33652 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 178
INFO 2025-05-07 00:43:07,285 allergen 7108 33652 Listing user allergens: user_id=66
INFO 2025-05-07 00:43:07,297 allergen 7108 33652 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:43:07,316 basehttp 7108 33652 "GET /api/user-allergens/?limit=1000 HTTP/1.1" 200 178
INFO 2025-05-07 00:43:07,421 allergen 7108 33652 Listing all allergens: user_id=66
INFO 2025-05-07 00:43:07,426 allergen 7108 33652 Retrieved 50 allergens, user_id=66, time=0.00s
INFO 2025-05-07 00:43:07,440 basehttp 7108 33652 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 00:43:07,533 allergen 7108 33652 Listing user allergens: user_id=66
INFO 2025-05-07 00:43:07,543 allergen 7108 33652 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:43:07,562 basehttp 7108 33652 "GET /api/user-allergens/?limit=1000 HTTP/1.1" 200 178
INFO 2025-05-07 00:46:30,759 allergen 7108 8848 Listing all allergens: user_id=66
INFO 2025-05-07 00:46:30,766 allergen 7108 8848 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:46:30,787 basehttp 7108 8848 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 00:58:50,274 views 7108 33164 Profile accessed: user_id=66
INFO 2025-05-07 00:58:50,391 basehttp 7108 33164 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 00:58:50,521 allergen 7108 33164 Listing user allergens: user_id=66
INFO 2025-05-07 00:58:50,546 ingredient 7108 34992 Listing refrigerator ingredients: user_id=66
INFO 2025-05-07 00:58:50,594 ingredient 7108 34992 Retrieved 0 refrigerator ingredients for user_id=66, time=0.05s
INFO 2025-05-07 00:58:50,616 allergen 7108 33164 Retrieved unknown user allergens, user_id=66, time=0.10s
INFO 2025-05-07 00:58:50,621 meal_plan 7108 35644 Getting current meal plan for user_id=66, date=2025-05-07
WARNING 2025-05-07 00:58:50,651 meal_plan 7108 35644 No current meal plan found for user_id=66, time=0.03s
WARNING 2025-05-07 00:58:50,756 basehttp 7108 35644 "GET /api/meal-plans/current/ HTTP/1.1" 404 68
INFO 2025-05-07 00:58:50,796 basehttp 7108 25040 "GET /api/shopping-list/ HTTP/1.1" 200 52
INFO 2025-05-07 00:58:50,832 basehttp 7108 34992 "GET /api/refrigerator/ HTTP/1.1" 200 52
INFO 2025-05-07 00:58:50,871 basehttp 7108 33164 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 178
INFO 2025-05-07 00:58:50,890 basehttp 7108 32616 "GET /api/favorites/ HTTP/1.1" 200 52
INFO 2025-05-07 00:58:51,021 allergen 7108 32616 Listing user allergens: user_id=66
INFO 2025-05-07 00:58:51,025 ingredient 7108 35644 Listing refrigerator ingredients: user_id=66
INFO 2025-05-07 00:58:51,029 ingredient 7108 35644 Retrieved 0 refrigerator ingredients for user_id=66, time=0.00s
INFO 2025-05-07 00:58:51,051 allergen 7108 32616 Retrieved unknown user allergens, user_id=66, time=0.03s
INFO 2025-05-07 00:58:51,077 meal_plan 7108 25040 Getting current meal plan for user_id=66, date=2025-05-07
WARNING 2025-05-07 00:58:51,089 meal_plan 7108 25040 No current meal plan found for user_id=66, time=0.01s
INFO 2025-05-07 00:58:51,180 basehttp 7108 34992 "GET /api/shopping-list/ HTTP/1.1" 200 52
WARNING 2025-05-07 00:58:51,204 basehttp 7108 25040 "GET /api/meal-plans/current/ HTTP/1.1" 404 68
INFO 2025-05-07 00:58:51,217 basehttp 7108 35644 "GET /api/refrigerator/ HTTP/1.1" 200 52
INFO 2025-05-07 00:58:51,247 basehttp 7108 32616 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 178
INFO 2025-05-07 00:58:51,261 basehttp 7108 33164 "GET /api/favorites/ HTTP/1.1" 200 52
INFO 2025-05-07 00:58:53,824 views 7108 32616 Profile accessed: user_id=66
INFO 2025-05-07 00:58:53,891 basehttp 7108 32616 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 00:58:54,029 allergen 7108 32616 Listing all allergens: user_id=66
INFO 2025-05-07 00:58:54,040 allergen 7108 32616 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:58:54,084 basehttp 7108 32616 "GET /api/allergens/ HTTP/1.1" 200 766
INFO 2025-05-07 00:58:54,157 allergen 7108 32616 Listing all allergens: user_id=66
INFO 2025-05-07 00:58:54,163 allergen 7108 32616 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:58:54,191 basehttp 7108 32616 "GET /api/allergens/?page=2 HTTP/1.1" 200 827
INFO 2025-05-07 00:58:54,258 allergen 7108 32616 Listing all allergens: user_id=66
INFO 2025-05-07 00:58:54,262 allergen 7108 32616 Retrieved 50 allergens, user_id=66, time=0.00s
INFO 2025-05-07 00:58:54,284 basehttp 7108 32616 "GET /api/allergens/?page=3 HTTP/1.1" 200 446
INFO 2025-05-07 00:58:54,390 allergen 7108 32616 Listing user allergens: user_id=66
INFO 2025-05-07 00:58:54,402 allergen 7108 32616 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:58:54,424 basehttp 7108 32616 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 178
INFO 2025-05-07 00:58:56,943 allergen 7108 32616 Listing all allergens: user_id=66
INFO 2025-05-07 00:58:56,947 allergen 7108 32616 Retrieved 50 allergens, user_id=66, time=0.00s
INFO 2025-05-07 00:58:56,966 basehttp 7108 32616 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 00:59:04,313 views 7108 32616 Profile accessed: user_id=66
INFO 2025-05-07 00:59:04,331 basehttp 7108 32616 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 00:59:04,409 allergen 7108 32616 Listing all allergens: user_id=66
INFO 2025-05-07 00:59:04,416 allergen 7108 32616 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:59:04,442 basehttp 7108 32616 "GET /api/allergens/ HTTP/1.1" 200 766
INFO 2025-05-07 00:59:04,532 allergen 7108 32616 Listing all allergens: user_id=66
INFO 2025-05-07 00:59:04,538 allergen 7108 32616 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:59:04,564 basehttp 7108 32616 "GET /api/allergens/?page=2 HTTP/1.1" 200 827
INFO 2025-05-07 00:59:04,643 allergen 7108 32616 Listing all allergens: user_id=66
INFO 2025-05-07 00:59:04,648 allergen 7108 32616 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:59:04,667 basehttp 7108 32616 "GET /api/allergens/?page=3 HTTP/1.1" 200 446
INFO 2025-05-07 00:59:04,765 allergen 7108 32616 Listing user allergens: user_id=66
INFO 2025-05-07 00:59:04,776 allergen 7108 32616 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:59:04,802 basehttp 7108 32616 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 178
INFO 2025-05-07 00:59:06,535 allergen 7108 32616 Listing all allergens: user_id=66
INFO 2025-05-07 00:59:06,540 allergen 7108 32616 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:59:06,561 basehttp 7108 32616 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 00:59:07,676 views 7108 32616 Profile accessed: user_id=66
INFO 2025-05-07 00:59:07,693 basehttp 7108 32616 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 00:59:07,909 allergen 7108 32616 Listing all allergens: user_id=66
INFO 2025-05-07 00:59:07,913 allergen 7108 32616 Retrieved 50 allergens, user_id=66, time=0.00s
INFO 2025-05-07 00:59:07,933 basehttp 7108 32616 "GET /api/allergens/ HTTP/1.1" 200 766
INFO 2025-05-07 00:59:08,013 allergen 7108 32616 Listing all allergens: user_id=66
INFO 2025-05-07 00:59:08,017 allergen 7108 32616 Retrieved 50 allergens, user_id=66, time=0.00s
INFO 2025-05-07 00:59:08,036 basehttp 7108 32616 "GET /api/allergens/?page=2 HTTP/1.1" 200 827
INFO 2025-05-07 00:59:08,116 allergen 7108 32616 Listing all allergens: user_id=66
INFO 2025-05-07 00:59:08,123 allergen 7108 32616 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:59:08,148 basehttp 7108 32616 "GET /api/allergens/?page=3 HTTP/1.1" 200 446
INFO 2025-05-07 00:59:08,264 allergen 7108 32616 Listing user allergens: user_id=66
INFO 2025-05-07 00:59:08,277 allergen 7108 32616 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 00:59:08,302 basehttp 7108 32616 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 178
INFO 2025-05-07 00:59:30,496 allergen 7108 28236 Listing all allergens: user_id=66
INFO 2025-05-07 00:59:30,501 allergen 7108 28236 Retrieved 50 allergens, user_id=66, time=0.00s
INFO 2025-05-07 00:59:30,527 basehttp 7108 28236 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 01:15:33,314 views 7108 21436 Profile accessed: user_id=66
INFO 2025-05-07 01:15:33,383 basehttp 7108 21436 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 01:15:33,544 allergen 7108 21436 Listing user allergens: user_id=66
INFO 2025-05-07 01:15:33,559 ingredient 7108 5800 Listing refrigerator ingredients: user_id=66
INFO 2025-05-07 01:15:33,573 ingredient 7108 5800 Retrieved 0 refrigerator ingredients for user_id=66, time=0.01s
INFO 2025-05-07 01:15:33,588 meal_plan 7108 8756 Getting current meal plan for user_id=66, date=2025-05-07
INFO 2025-05-07 01:15:33,590 allergen 7108 21436 Retrieved unknown user allergens, user_id=66, time=0.05s
WARNING 2025-05-07 01:15:33,599 meal_plan 7108 8756 No current meal plan found for user_id=66, time=0.01s
INFO 2025-05-07 01:15:33,676 basehttp 7108 21436 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 178
INFO 2025-05-07 01:15:33,691 basehttp 7108 12032 "GET /api/favorites/ HTTP/1.1" 200 52
INFO 2025-05-07 01:15:33,715 basehttp 7108 5800 "GET /api/refrigerator/ HTTP/1.1" 200 52
WARNING 2025-05-07 01:15:33,764 basehttp 7108 8756 "GET /api/meal-plans/current/ HTTP/1.1" 404 68
INFO 2025-05-07 01:15:33,789 basehttp 7108 33156 "GET /api/shopping-list/ HTTP/1.1" 200 52
INFO 2025-05-07 01:15:33,946 ingredient 7108 33156 Listing refrigerator ingredients: user_id=66
INFO 2025-05-07 01:15:33,956 ingredient 7108 33156 Retrieved 0 refrigerator ingredients for user_id=66, time=0.01s
INFO 2025-05-07 01:15:33,959 allergen 7108 8756 Listing user allergens: user_id=66
INFO 2025-05-07 01:15:33,968 meal_plan 7108 21436 Getting current meal plan for user_id=66, date=2025-05-07
WARNING 2025-05-07 01:15:33,977 meal_plan 7108 21436 No current meal plan found for user_id=66, time=0.01s
INFO 2025-05-07 01:15:34,015 allergen 7108 8756 Retrieved unknown user allergens, user_id=66, time=0.06s
INFO 2025-05-07 01:15:34,132 basehttp 7108 5800 "GET /api/shopping-list/ HTTP/1.1" 200 52
INFO 2025-05-07 01:15:34,157 basehttp 7108 12032 "GET /api/favorites/ HTTP/1.1" 200 52
INFO 2025-05-07 01:15:34,163 basehttp 7108 33156 "GET /api/refrigerator/ HTTP/1.1" 200 52
WARNING 2025-05-07 01:15:34,199 basehttp 7108 21436 "GET /api/meal-plans/current/ HTTP/1.1" 404 68
INFO 2025-05-07 01:15:34,218 basehttp 7108 8756 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 178
INFO 2025-05-07 01:15:36,503 allergen 7108 8756 Listing user allergens: user_id=66
INFO 2025-05-07 01:15:36,518 allergen 7108 8756 Retrieved unknown user allergens, user_id=66, time=0.02s
INFO 2025-05-07 01:15:36,557 basehttp 7108 8756 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 178
INFO 2025-05-07 01:15:39,153 allergen 7108 8756 Listing all allergens: user_id=66
INFO 2025-05-07 01:15:39,158 allergen 7108 8756 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 01:15:39,178 basehttp 7108 8756 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 01:15:40,794 views 7108 8756 Profile update attempt: user_id=66
INFO 2025-05-07 01:15:40,954 views 7108 8756 Profile updated successfully: user_id=66, time=0.16s
INFO 2025-05-07 01:15:40,977 basehttp 7108 8756 "PUT /api/users/profile/ HTTP/1.1" 200 141
INFO 2025-05-07 01:15:41,058 allergen 7108 8756 Starting user allergens update for user ID: 66
INFO 2025-05-07 01:15:41,058 allergen 7108 8756 Request data: {'allergen_ids': [3, 4, 5, 2]}
INFO 2025-05-07 01:15:41,059 allergen 7108 8756 Allergen IDs to update: [3, 4, 5, 2]
INFO 2025-05-07 01:15:41,070 allergen 7108 8756 Deleted (4, {'core.M2MUsrAlg': 4}) existing allergen records
INFO 2025-05-07 01:15:41,082 allergen 7108 8756 Created allergen mapping: user 66 - allergen 3
INFO 2025-05-07 01:15:41,089 allergen 7108 8756 Created allergen mapping: user 66 - allergen 4
INFO 2025-05-07 01:15:41,096 allergen 7108 8756 Created allergen mapping: user 66 - allergen 5
INFO 2025-05-07 01:15:41,101 allergen 7108 8756 Created allergen mapping: user 66 - allergen 2
INFO 2025-05-07 01:15:41,102 allergen 7108 8756 Successfully updated allergens for user 66: [3, 4, 5, 2]
ERROR 2025-05-07 01:15:41,115 allergen 7108 8756 Error updating allergens: 'DatabaseCache' object has no attribute '_cache'
ERROR 2025-05-07 01:15:41,116 allergen 7108 8756 Traceback: Traceback (most recent call last):
  File "D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\apps\core\views\allergen.py", line 110, in update_user_allergens
    for key in cache._cache.keys():
               ^^^^^^^^^^^^
  File "D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\.venv\Lib\site-packages\django\utils\connection.py", line 15, in __getattr__
    return getattr(self._connections[self._alias], item)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'DatabaseCache' object has no attribute '_cache'

WARNING 2025-05-07 01:15:41,156 basehttp 7108 8756 "POST /api/user-allergens/update/ HTTP/1.1" 400 60
INFO 2025-05-07 01:21:39,884 autoreload 7108 35848 D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\apps\core\views\allergen.py changed, reloading.
INFO 2025-05-07 01:21:42,023 autoreload 25940 12964 Watching for file changes with StatReloader
INFO 2025-05-07 01:21:42,461 wsgi 25940 32064 ==== Starting FoodBalancer Backend Application ====
INFO 2025-05-07 01:21:42,462 wsgi 25940 32064 Environment: config.settings
INFO 2025-05-07 01:21:42,462 wsgi 25940 32064 Python version: 3.12.8 (tags/v3.12.8:2dc476b, Dec  3 2024, 19:30:04) [MSC v.1942 64 bit (AMD64)]
INFO 2025-05-07 01:21:42,467 wsgi 25940 32064 Application initialized successfully
INFO 2025-05-07 01:25:26,194 autoreload 28236 3396 Watching for file changes with StatReloader
INFO 2025-05-07 01:25:26,611 wsgi 28236 21348 ==== Starting FoodBalancer Backend Application ====
INFO 2025-05-07 01:25:26,611 wsgi 28236 21348 Environment: config.settings
INFO 2025-05-07 01:25:26,612 wsgi 28236 21348 Python version: 3.12.8 (tags/v3.12.8:2dc476b, Dec  3 2024, 19:30:04) [MSC v.1942 64 bit (AMD64)]
INFO 2025-05-07 01:25:26,618 wsgi 28236 21348 Application initialized successfully
INFO 2025-05-07 01:26:11,459 views 28236 26804 Profile accessed: user_id=66
INFO 2025-05-07 01:26:11,520 basehttp 28236 26804 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 01:26:11,729 ingredient 28236 13076 Listing refrigerator ingredients: user_id=66
INFO 2025-05-07 01:26:11,737 meal_plan 28236 22916 Getting current meal plan for user_id=66, date=2025-05-07
WARNING 2025-05-07 01:26:11,760 meal_plan 28236 22916 No current meal plan found for user_id=66, time=0.02s
INFO 2025-05-07 01:26:11,780 ingredient 28236 13076 Retrieved 0 refrigerator ingredients for user_id=66, time=0.05s
INFO 2025-05-07 01:26:11,980 basehttp 28236 31352 "GET /api/favorites/ HTTP/1.1" 200 52
INFO 2025-05-07 01:26:12,022 basehttp 28236 28756 "GET /api/shopping-list/ HTTP/1.1" 200 52
INFO 2025-05-07 01:26:12,033 basehttp 28236 13076 "GET /api/refrigerator/ HTTP/1.1" 200 52
WARNING 2025-05-07 01:26:12,060 basehttp 28236 22916 "GET /api/meal-plans/current/ HTTP/1.1" 404 68
ERROR 2025-05-07 01:26:12,107 basehttp 28236 26804 "GET /api/user-allergens/?limit=100 HTTP/1.1" 500 23678
INFO 2025-05-07 01:26:12,310 ingredient 28236 31352 Listing refrigerator ingredients: user_id=66
INFO 2025-05-07 01:26:12,337 ingredient 28236 31352 Retrieved 0 refrigerator ingredients for user_id=66, time=0.03s
INFO 2025-05-07 01:26:12,376 meal_plan 28236 26804 Getting current meal plan for user_id=66, date=2025-05-07
WARNING 2025-05-07 01:26:12,387 meal_plan 28236 26804 No current meal plan found for user_id=66, time=0.01s
ERROR 2025-05-07 01:26:12,519 basehttp 28236 13076 "GET /api/user-allergens/?limit=100 HTTP/1.1" 500 23678
INFO 2025-05-07 01:26:12,554 basehttp 28236 22916 "GET /api/shopping-list/ HTTP/1.1" 200 52
INFO 2025-05-07 01:26:12,610 basehttp 28236 31352 "GET /api/refrigerator/ HTTP/1.1" 200 52
WARNING 2025-05-07 01:26:12,631 basehttp 28236 26804 "GET /api/meal-plans/current/ HTTP/1.1" 404 68
INFO 2025-05-07 01:26:12,642 basehttp 28236 28756 "GET /api/favorites/ HTTP/1.1" 200 52
INFO 2025-05-07 01:26:19,536 views 28236 13076 Profile accessed: user_id=66
INFO 2025-05-07 01:26:19,559 basehttp 28236 13076 "GET /api/users/profile/ HTTP/1.1" 200 153
ERROR 2025-05-07 01:26:19,695 basehttp 28236 13076 "GET /api/user-allergens/?limit=100 HTTP/1.1" 500 23678
INFO 2025-05-07 01:26:21,871 allergen 28236 13076 Listing all allergens: user_id=66
INFO 2025-05-07 01:26:21,879 allergen 28236 13076 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 01:26:21,894 basehttp 28236 13076 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 01:26:25,694 views 28236 13076 Profile update attempt: user_id=66
INFO 2025-05-07 01:26:25,738 views 28236 13076 Profile updated successfully: user_id=66, time=0.04s
INFO 2025-05-07 01:26:25,761 basehttp 28236 13076 "PUT /api/users/profile/ HTTP/1.1" 200 141
ERROR 2025-05-07 01:26:25,915 basehttp 28236 13076 "POST /api/user-allergens/update/ HTTP/1.1" 500 23704
INFO 2025-05-07 01:26:31,628 views 28236 13076 Profile accessed: user_id=66
INFO 2025-05-07 01:26:31,641 basehttp 28236 13076 "GET /api/users/profile/ HTTP/1.1" 200 153
ERROR 2025-05-07 01:26:31,757 basehttp 28236 13076 "GET /api/user-allergens/?limit=100 HTTP/1.1" 500 23678
INFO 2025-05-07 01:26:48,150 autoreload 28236 3396 D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\apps\core\views\allergen.py changed, reloading.
INFO 2025-05-07 01:26:49,629 autoreload 14608 15684 Watching for file changes with StatReloader
INFO 2025-05-07 01:26:49,950 wsgi 14608 13712 ==== Starting FoodBalancer Backend Application ====
INFO 2025-05-07 01:26:49,951 wsgi 14608 13712 Environment: config.settings
INFO 2025-05-07 01:26:49,951 wsgi 14608 13712 Python version: 3.12.8 (tags/v3.12.8:2dc476b, Dec  3 2024, 19:30:04) [MSC v.1942 64 bit (AMD64)]
INFO 2025-05-07 01:26:49,956 wsgi 14608 13712 Application initialized successfully
INFO 2025-05-07 01:26:55,689 allergen 14608 14788 Listing all allergens: user_id=66
INFO 2025-05-07 01:26:55,697 allergen 14608 14788 Retrieved 50 allergens, user_id=66, time=0.01s
INFO 2025-05-07 01:26:55,756 basehttp 14608 14788 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 01:26:57,582 views 14608 14788 Profile update attempt: user_id=66
INFO 2025-05-07 01:26:57,602 views 14608 14788 Profile updated successfully: user_id=66, time=0.02s
INFO 2025-05-07 01:26:57,623 basehttp 14608 14788 "PUT /api/users/profile/ HTTP/1.1" 200 141
INFO 2025-05-07 01:26:57,684 allergen 14608 14788 Starting user allergens update for user ID: 66
INFO 2025-05-07 01:26:57,684 allergen 14608 14788 Request data: {'allergen_ids': [4, 5, 6]}
INFO 2025-05-07 01:26:57,684 allergen 14608 14788 Allergen IDs to update: [4, 5, 6]
INFO 2025-05-07 01:26:57,696 allergen 14608 14788 Deleted (4, {'core.M2MUsrAlg': 4}) existing allergen records
INFO 2025-05-07 01:26:57,707 allergen 14608 14788 Created allergen mapping: user 66 - allergen 4
INFO 2025-05-07 01:26:57,715 allergen 14608 14788 Created allergen mapping: user 66 - allergen 5
INFO 2025-05-07 01:26:57,720 allergen 14608 14788 Created allergen mapping: user 66 - allergen 6
INFO 2025-05-07 01:26:57,721 allergen 14608 14788 Successfully updated allergens for user 66: [4, 5, 6]
ERROR 2025-05-07 01:26:57,726 allergen 14608 14788 Error updating allergens: 'DatabaseCache' object has no attribute '_cache'
ERROR 2025-05-07 01:26:57,726 allergen 14608 14788 Traceback: Traceback (most recent call last):
  File "D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\apps\core\views\allergen.py", line 110, in update_user_allergens
    for key in cache._cache.keys():
               ^^^^^^^^^^^^
  File "D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\.venv\Lib\site-packages\django\utils\connection.py", line 15, in __getattr__
    return getattr(self._connections[self._alias], item)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'DatabaseCache' object has no attribute '_cache'

WARNING 2025-05-07 01:26:57,765 basehttp 14608 14788 "POST /api/user-allergens/update/ HTTP/1.1" 400 60
INFO 2025-05-07 01:26:59,207 views 14608 14788 Profile accessed: user_id=66
INFO 2025-05-07 01:26:59,219 basehttp 14608 14788 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 01:26:59,306 allergen 14608 14788 Listing user allergens: user_id=66
INFO 2025-05-07 01:26:59,317 allergen 14608 14788 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 01:26:59,337 basehttp 14608 14788 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 148
INFO 2025-05-07 01:27:41,032 allergen 14608 34016 Listing all allergens: user_id=66
INFO 2025-05-07 01:27:41,036 allergen 14608 34016 Retrieved 50 allergens, user_id=66, time=0.00s
INFO 2025-05-07 01:27:41,054 basehttp 14608 34016 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 01:27:45,859 views 14608 34016 Profile update attempt: user_id=66
INFO 2025-05-07 01:27:45,865 views 14608 34016 Profile updated successfully: user_id=66, time=0.01s
INFO 2025-05-07 01:27:45,885 basehttp 14608 34016 "PUT /api/users/profile/ HTTP/1.1" 200 141
INFO 2025-05-07 01:27:45,936 allergen 14608 34016 Starting user allergens update for user ID: 66
INFO 2025-05-07 01:27:45,937 allergen 14608 34016 Request data: {'allergen_ids': [4, 5, 6, 1]}
INFO 2025-05-07 01:27:45,937 allergen 14608 34016 Allergen IDs to update: [4, 5, 6, 1]
INFO 2025-05-07 01:27:45,944 allergen 14608 34016 Deleted (3, {'core.M2MUsrAlg': 3}) existing allergen records
INFO 2025-05-07 01:27:45,952 allergen 14608 34016 Created allergen mapping: user 66 - allergen 4
INFO 2025-05-07 01:27:45,959 allergen 14608 34016 Created allergen mapping: user 66 - allergen 5
INFO 2025-05-07 01:27:45,966 allergen 14608 34016 Created allergen mapping: user 66 - allergen 6
INFO 2025-05-07 01:27:45,972 allergen 14608 34016 Created allergen mapping: user 66 - allergen 1
INFO 2025-05-07 01:27:45,972 allergen 14608 34016 Successfully updated allergens for user 66: [4, 5, 6, 1]
ERROR 2025-05-07 01:27:45,976 allergen 14608 34016 Error updating allergens: 'DatabaseCache' object has no attribute '_cache'
ERROR 2025-05-07 01:27:45,976 allergen 14608 34016 Traceback: Traceback (most recent call last):
  File "D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\apps\core\views\allergen.py", line 110, in update_user_allergens
    for key in cache._cache.keys():
               ^^^^^^^^^^^^
  File "D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\.venv\Lib\site-packages\django\utils\connection.py", line 15, in __getattr__
    return getattr(self._connections[self._alias], item)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'DatabaseCache' object has no attribute '_cache'

WARNING 2025-05-07 01:27:46,011 basehttp 14608 34016 "POST /api/user-allergens/update/ HTTP/1.1" 400 60
INFO 2025-05-07 01:27:47,913 views 14608 34016 Profile accessed: user_id=66
INFO 2025-05-07 01:27:47,930 basehttp 14608 34016 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 01:27:48,023 allergen 14608 34016 Listing user allergens: user_id=66
INFO 2025-05-07 01:27:48,037 allergen 14608 34016 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 01:27:48,065 basehttp 14608 34016 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 181
INFO 2025-05-07 01:28:08,573 views 14608 25072 Profile accessed: user_id=66
INFO 2025-05-07 01:28:08,586 basehttp 14608 25072 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 01:28:08,651 allergen 14608 25072 Listing user allergens: user_id=66
INFO 2025-05-07 01:28:08,661 allergen 14608 25072 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 01:28:08,681 basehttp 14608 25072 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 181
INFO 2025-05-07 01:28:10,229 allergen 14608 25072 Listing all allergens: user_id=66
INFO 2025-05-07 01:28:10,233 allergen 14608 25072 Retrieved 50 allergens, user_id=66, time=0.00s
INFO 2025-05-07 01:28:10,249 basehttp 14608 25072 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 01:28:12,339 views 14608 25072 Profile update attempt: user_id=66
INFO 2025-05-07 01:28:12,346 views 14608 25072 Profile updated successfully: user_id=66, time=0.01s
INFO 2025-05-07 01:28:12,363 basehttp 14608 25072 "PUT /api/users/profile/ HTTP/1.1" 200 141
INFO 2025-05-07 01:28:12,433 allergen 14608 25072 Starting user allergens update for user ID: 66
INFO 2025-05-07 01:28:12,433 allergen 14608 25072 Request data: {'allergen_ids': [4, 5, 6, 1, 2]}
INFO 2025-05-07 01:28:12,434 allergen 14608 25072 Allergen IDs to update: [4, 5, 6, 1, 2]
INFO 2025-05-07 01:28:12,441 allergen 14608 25072 Deleted (4, {'core.M2MUsrAlg': 4}) existing allergen records
INFO 2025-05-07 01:28:12,447 allergen 14608 25072 Created allergen mapping: user 66 - allergen 4
INFO 2025-05-07 01:28:12,453 allergen 14608 25072 Created allergen mapping: user 66 - allergen 5
INFO 2025-05-07 01:28:12,459 allergen 14608 25072 Created allergen mapping: user 66 - allergen 6
INFO 2025-05-07 01:28:12,465 allergen 14608 25072 Created allergen mapping: user 66 - allergen 1
INFO 2025-05-07 01:28:12,470 allergen 14608 25072 Created allergen mapping: user 66 - allergen 2
INFO 2025-05-07 01:28:12,470 allergen 14608 25072 Successfully updated allergens for user 66: [4, 5, 6, 1, 2]
ERROR 2025-05-07 01:28:12,474 allergen 14608 25072 Error updating allergens: 'DatabaseCache' object has no attribute '_cache'
ERROR 2025-05-07 01:28:12,474 allergen 14608 25072 Traceback: Traceback (most recent call last):
  File "D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\apps\core\views\allergen.py", line 110, in update_user_allergens
    for key in cache._cache.keys():
               ^^^^^^^^^^^^
  File "D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\.venv\Lib\site-packages\django\utils\connection.py", line 15, in __getattr__
    return getattr(self._connections[self._alias], item)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'DatabaseCache' object has no attribute '_cache'

WARNING 2025-05-07 01:28:12,501 basehttp 14608 25072 "POST /api/user-allergens/update/ HTTP/1.1" 400 60
INFO 2025-05-07 01:28:14,452 views 14608 25072 Profile accessed: user_id=66
INFO 2025-05-07 01:28:14,465 basehttp 14608 25072 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 01:28:14,528 allergen 14608 25072 Listing user allergens: user_id=66
INFO 2025-05-07 01:28:14,539 allergen 14608 25072 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 01:28:14,560 basehttp 14608 25072 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 216
INFO 2025-05-07 01:28:18,303 allergen 14608 25072 Listing all allergens: user_id=66
INFO 2025-05-07 01:28:18,307 allergen 14608 25072 Retrieved 50 allergens, user_id=66, time=0.00s
INFO 2025-05-07 01:28:18,326 basehttp 14608 25072 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 01:28:22,182 views 14608 25072 Profile update attempt: user_id=66
INFO 2025-05-07 01:28:22,189 views 14608 25072 Profile updated successfully: user_id=66, time=0.01s
INFO 2025-05-07 01:28:22,206 basehttp 14608 25072 "PUT /api/users/profile/ HTTP/1.1" 200 141
INFO 2025-05-07 01:28:22,285 allergen 14608 25072 Starting user allergens update for user ID: 66
INFO 2025-05-07 01:28:22,286 allergen 14608 25072 Request data: {'allergen_ids': [4, 5, 6, 1, 2]}
INFO 2025-05-07 01:28:22,287 allergen 14608 25072 Allergen IDs to update: [4, 5, 6, 1, 2]
INFO 2025-05-07 01:28:22,294 allergen 14608 25072 Deleted (5, {'core.M2MUsrAlg': 5}) existing allergen records
INFO 2025-05-07 01:28:22,300 allergen 14608 25072 Created allergen mapping: user 66 - allergen 4
INFO 2025-05-07 01:28:22,308 allergen 14608 25072 Created allergen mapping: user 66 - allergen 5
INFO 2025-05-07 01:28:22,314 allergen 14608 25072 Created allergen mapping: user 66 - allergen 6
INFO 2025-05-07 01:28:22,320 allergen 14608 25072 Created allergen mapping: user 66 - allergen 1
INFO 2025-05-07 01:28:22,326 allergen 14608 25072 Created allergen mapping: user 66 - allergen 2
INFO 2025-05-07 01:28:22,326 allergen 14608 25072 Successfully updated allergens for user 66: [4, 5, 6, 1, 2]
ERROR 2025-05-07 01:28:22,329 allergen 14608 25072 Error updating allergens: 'DatabaseCache' object has no attribute '_cache'
ERROR 2025-05-07 01:28:22,329 allergen 14608 25072 Traceback: Traceback (most recent call last):
  File "D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\apps\core\views\allergen.py", line 110, in update_user_allergens
    for key in cache._cache.keys():
               ^^^^^^^^^^^^
  File "D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\.venv\Lib\site-packages\django\utils\connection.py", line 15, in __getattr__
    return getattr(self._connections[self._alias], item)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'DatabaseCache' object has no attribute '_cache'

WARNING 2025-05-07 01:28:22,354 basehttp 14608 25072 "POST /api/user-allergens/update/ HTTP/1.1" 400 60
INFO 2025-05-07 01:28:42,040 views 14608 34440 Profile accessed: user_id=66
INFO 2025-05-07 01:28:42,057 basehttp 14608 34440 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 01:28:42,179 allergen 14608 34440 Listing user allergens: user_id=66
INFO 2025-05-07 01:28:42,194 allergen 14608 34440 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 01:28:42,217 basehttp 14608 34440 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 216
INFO 2025-05-07 01:28:42,912 views 14608 34440 Profile accessed: user_id=66
INFO 2025-05-07 01:28:42,941 basehttp 14608 34440 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 01:28:43,028 allergen 14608 34440 Listing user allergens: user_id=66
INFO 2025-05-07 01:28:43,044 allergen 14608 34440 Retrieved unknown user allergens, user_id=66, time=0.02s
INFO 2025-05-07 01:28:43,072 basehttp 14608 34440 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 216
INFO 2025-05-07 01:28:46,370 allergen 14608 34440 Listing all allergens: user_id=66
INFO 2025-05-07 01:28:46,374 allergen 14608 34440 Retrieved 50 allergens, user_id=66, time=0.00s
INFO 2025-05-07 01:28:46,388 basehttp 14608 34440 "GET /api/allergens/?limit=1000 HTTP/1.1" 200 777
INFO 2025-05-07 01:28:47,455 views 14608 34440 Profile update attempt: user_id=66
INFO 2025-05-07 01:28:47,462 views 14608 34440 Profile updated successfully: user_id=66, time=0.01s
INFO 2025-05-07 01:28:47,481 basehttp 14608 34440 "PUT /api/users/profile/ HTTP/1.1" 200 141
INFO 2025-05-07 01:28:47,545 allergen 14608 34440 Starting user allergens update for user ID: 66
INFO 2025-05-07 01:28:47,546 allergen 14608 34440 Request data: {'allergen_ids': [4, 5, 6, 1, 2]}
INFO 2025-05-07 01:28:47,546 allergen 14608 34440 Allergen IDs to update: [4, 5, 6, 1, 2]
INFO 2025-05-07 01:28:47,554 allergen 14608 34440 Deleted (5, {'core.M2MUsrAlg': 5}) existing allergen records
INFO 2025-05-07 01:28:47,561 allergen 14608 34440 Created allergen mapping: user 66 - allergen 4
INFO 2025-05-07 01:28:47,568 allergen 14608 34440 Created allergen mapping: user 66 - allergen 5
INFO 2025-05-07 01:28:47,575 allergen 14608 34440 Created allergen mapping: user 66 - allergen 6
INFO 2025-05-07 01:28:47,580 allergen 14608 34440 Created allergen mapping: user 66 - allergen 1
INFO 2025-05-07 01:28:47,587 allergen 14608 34440 Created allergen mapping: user 66 - allergen 2
INFO 2025-05-07 01:28:47,587 allergen 14608 34440 Successfully updated allergens for user 66: [4, 5, 6, 1, 2]
ERROR 2025-05-07 01:28:47,590 allergen 14608 34440 Error updating allergens: 'DatabaseCache' object has no attribute '_cache'
ERROR 2025-05-07 01:28:47,591 allergen 14608 34440 Traceback: Traceback (most recent call last):
  File "D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\apps\core\views\allergen.py", line 110, in update_user_allergens
    for key in cache._cache.keys():
               ^^^^^^^^^^^^
  File "D:\BSUIR\Semester6\CourseWork\FoodBalancer\AppBackend\.venv\Lib\site-packages\django\utils\connection.py", line 15, in __getattr__
    return getattr(self._connections[self._alias], item)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'DatabaseCache' object has no attribute '_cache'

WARNING 2025-05-07 01:28:47,617 basehttp 14608 34440 "POST /api/user-allergens/update/ HTTP/1.1" 400 60
INFO 2025-05-07 01:28:48,917 views 14608 34440 Profile accessed: user_id=66
INFO 2025-05-07 01:28:48,930 basehttp 14608 34440 "GET /api/users/profile/ HTTP/1.1" 200 153
INFO 2025-05-07 01:28:48,995 allergen 14608 34440 Listing user allergens: user_id=66
INFO 2025-05-07 01:28:49,007 allergen 14608 34440 Retrieved unknown user allergens, user_id=66, time=0.01s
INFO 2025-05-07 01:28:49,026 basehttp 14608 34440 "GET /api/user-allergens/?limit=100 HTTP/1.1" 200 216
